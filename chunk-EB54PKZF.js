import{$a as et,$b as z,Ab as w,Ba as B,Bb as lt,Cb as ct,Gb as dt,Hb as u,Ib as A,Jb as p,Ka as X,La as q,Lb as pt,Ma as Q,Mb as L,Na as J,Nb as T,Oa as $,Ob as mt,Pa as M,Pb as ut,Q as V,Qa as l,Qb as g,Ra as d,Rb as _t,Sa as b,Sb as ft,Tb as I,Ub as Et,V as C,Vb as bt,W as R,Wa as tt,Wb as gt,Xb as yt,Ya as H,Yb as Pt,Zb as wt,_a as D,_b as N,ab as it,bb as ot,bc as Mt,da as W,db as nt,eb as m,ec as Tt,fb as O,fc as vt,gb as st,gc as Ct,hc as U,ic as Rt,jc as xt,na as x,pa as f,tb as at,ub as rt,yb as ht,za as F,zb as P}from"./chunk-3Z3AIU3L.js";var Dt={type:"change"},G={type:"start"},St={type:"end"},S=new pt,Ot=new gt,Ut=Math.cos(70*dt.DEG2RAD),c=new p,_=2*Math.PI,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Y=1e-6,k=class extends Rt{constructor(t,e=null){super(t,e),this.state=r.NONE,this.target=new p,this.cursor=new p,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:P.ROTATE,MIDDLE:P.DOLLY,RIGHT:P.PAN},this.touches={ONE:w.ROTATE,TWO:w.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new p,this._lastQuaternion=new A,this._lastTargetPosition=new p,this._quat=new A().setFromUnitVectors(t.up,new p(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new U,this._sphericalDelta=new U,this._scale=1,this._panOffset=new p,this._rotateStart=new u,this._rotateEnd=new u,this._rotateDelta=new u,this._panStart=new u,this._panEnd=new u,this._panDelta=new u,this._dollyStart=new u,this._dollyEnd=new u,this._dollyDelta=new u,this._dollyDirection=new p,this._mouse=new u,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Gt.bind(this),this._onPointerDown=Yt.bind(this),this._onPointerUp=Zt.bind(this),this._onContextMenu=qt.bind(this),this._onMouseWheel=Wt.bind(this),this._onKeyDown=Ft.bind(this),this._onTouchStart=Bt.bind(this),this._onTouchMove=Xt.bind(this),this._onMouseDown=Kt.bind(this),this._onMouseMove=Vt.bind(this),this._interceptControlDown=Qt.bind(this),this._interceptControlUp=Jt.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Dt),this.update(),this.state=r.NONE}update(t=null){let e=this.object.position;c.copy(e).sub(this.target),c.applyQuaternion(this._quat),this._spherical.setFromVector3(c),this.autoRotate&&this.state===r.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(i)&&isFinite(n)&&(i<-Math.PI?i+=_:i>Math.PI&&(i-=_),n<-Math.PI?n+=_:n>Math.PI&&(n-=_),i<=n?this._spherical.theta=Math.max(i,Math.min(n,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+n)/2?Math.max(i,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(c.setFromSpherical(this._spherical),c.applyQuaternion(this._quatInverse),e.copy(this.target).add(c),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){let h=c.length();a=this._clampDistance(h*this._scale);let E=h-a;this.object.position.addScaledVector(this._dollyDirection,E),this.object.updateMatrixWorld(),s=!!E}else if(this.object.isOrthographicCamera){let h=new p(this._mouse.x,this._mouse.y,0);h.unproject(this.object);let E=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=E!==this.object.zoom;let y=new p(this._mouse.x,this._mouse.y,0);y.unproject(this.object),this.object.position.sub(y).add(h),this.object.updateMatrixWorld(),a=c.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(S.origin.copy(this.object.position),S.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(S.direction))<Ut?this.object.lookAt(this.target):(Ot.setFromNormalAndCoplanarPoint(this.object.up,this.target),S.intersectPlane(Ot,this.target))))}else if(this.object.isOrthographicCamera){let a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>Y||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Y||this._lastTargetPosition.distanceToSquared(this.target)>Y?(this.dispatchEvent(Dt),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?_/60*this.autoRotateSpeed*t:_/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){c.setFromMatrixColumn(e,0),c.multiplyScalar(-t),this._panOffset.add(c)}_panUp(t,e){this.screenSpacePanning===!0?c.setFromMatrixColumn(e,1):(c.setFromMatrixColumn(e,0),c.crossVectors(this.object.up,c)),c.multiplyScalar(t),this._panOffset.add(c)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let n=this.object.position;c.copy(n).sub(this.target);let s=c.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*s/i.clientHeight,this.object.matrix),this._panUp(2*e*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),n=t-i.left,s=e-i.top,a=i.width,h=i.height;this._mouse.x=n/a*2-1,this._mouse.y=-(s/h)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(_*this._rotateDelta.x/e.clientHeight),this._rotateUp(_*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(_*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-_*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(_*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-_*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(i,n)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(i,n)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,s=Math.sqrt(i*i+n*n);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let i=this._getSecondPointerPosition(t),n=.5*(t.pageX+i.x),s=.5*(t.pageY+i.y);this._rotateEnd.set(n,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(_*this._rotateDelta.x/e.clientHeight),this._rotateUp(_*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(i,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,s=Math.sqrt(i*i+n*n);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let a=(t.pageX+e.x)*.5,h=(t.pageY+e.y)*.5;this._updateZoomParameters(a,h)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new u,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function Yt(o){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(o.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(o)&&(this._addPointer(o),o.pointerType==="touch"?this._onTouchStart(o):this._onMouseDown(o)))}function Gt(o){this.enabled!==!1&&(o.pointerType==="touch"?this._onTouchMove(o):this._onMouseMove(o))}function Zt(o){switch(this._removePointer(o),this._pointers.length){case 0:this.domElement.releasePointerCapture(o.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(St),this.state=r.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function Kt(o){let t;switch(o.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case P.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(o),this.state=r.DOLLY;break;case P.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=r.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=r.ROTATE}break;case P.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(o),this.state=r.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(o),this.state=r.PAN}break;default:this.state=r.NONE}this.state!==r.NONE&&this.dispatchEvent(G)}function Vt(o){switch(this.state){case r.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(o);break;case r.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(o);break;case r.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(o);break}}function Wt(o){this.enabled===!1||this.enableZoom===!1||this.state!==r.NONE||(o.preventDefault(),this.dispatchEvent(G),this._handleMouseWheel(this._customWheelEvent(o)),this.dispatchEvent(St))}function Ft(o){this.enabled!==!1&&this._handleKeyDown(o)}function Bt(o){switch(this._trackPointer(o),this._pointers.length){case 1:switch(this.touches.ONE){case w.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(o),this.state=r.TOUCH_ROTATE;break;case w.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(o),this.state=r.TOUCH_PAN;break;default:this.state=r.NONE}break;case 2:switch(this.touches.TWO){case w.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(o),this.state=r.TOUCH_DOLLY_PAN;break;case w.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(o),this.state=r.TOUCH_DOLLY_ROTATE;break;default:this.state=r.NONE}break;default:this.state=r.NONE}this.state!==r.NONE&&this.dispatchEvent(G)}function Xt(o){switch(this._trackPointer(o),this.state){case r.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(o),this.update();break;case r.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(o),this.update();break;case r.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(o),this.update();break;case r.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(o),this.update();break;default:this.state=r.NONE}}function qt(o){this.enabled!==!1&&o.preventDefault()}function Qt(o){o.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Jt(o){o.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var $t=["rendererContainer"];function te(o,t){if(o&1&&b(0,"video",29),o&2){let e,i=D(2);M("src",(e=i.activeProject())==null?null:e.videoUrl,x)}}function ee(o,t){if(o&1&&b(0,"img",30),o&2){let e,i=D(2);M("src",(e=i.activeProject())==null?null:e.heroImage,x)}}function ie(o,t){if(o&1&&(l(0,"div",13),B(1,te,1,1,"video",26)(2,ee,1,1,"img",27),b(3,"div",28),d()),o&2){let e,i,n=D();f(),M("ngIf",(e=n.activeProject())==null?null:e.videoUrl),f(),M("ngIf",!((i=n.activeProject())!=null&&i.videoUrl)&&((i=n.activeProject())==null?null:i.heroImage))}}function oe(o,t){if(o&1&&(l(0,"span",22),m(1),d()),o&2){let e=t.$implicit;f(),O(e)}}var kt=class o{rendererContainer;dataService=V(ht);activeProject=W(null);scene;camera;renderer;controls;raycaster=new Ct;mouse=new u;mainGroup=new I;markers=[];COLOR_WEB=65535;COLOR_GAME=16711935;COLOR_HOVER=16711680;hoveredMarker=null;planetUniforms;animationId=0;clock=new vt;ngAfterViewInit(){this.initThreeJS(),this.loadProjectMarkers(),this.animate()}initThreeJS(){let t=window.innerWidth,e=window.innerHeight;this.scene=new bt,this.scene.background=new L(328965),this.scene.fog=new Et(328965,.002),this.camera=new ft(60,t/e,.1,1e3),this.camera.position.z=25,this.renderer=new xt({antialias:!0,alpha:!0}),this.renderer.setSize(t,e),this.renderer.setPixelRatio(window.devicePixelRatio),this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.controls=new k(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=.8;let i=new Tt(16777215,.5);this.scene.add(i);let n=new ut,s=3e3,a=new Float32Array(s*3);for(let h=0;h<s*3;h++)a[h]=(Math.random()-.5)*300;n.setAttribute("position",new mt(a,3)),this.scene.add(new Pt(n,new yt({size:.15,color:16777215,transparent:!0,opacity:.8}))),this.createWireframePlanet(),this.scene.add(this.mainGroup),window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})}createWireframePlanet(){let e=new N(10,4);this.planetUniforms={uTime:{value:0},uColor:{value:new L(65535)},uClickPos:{value:new p(0,0,0)},uClickTime:{value:-100}};let i=new _t({uniforms:this.planetUniforms,wireframe:!0,transparent:!0,vertexShader:`
        uniform float uTime; uniform vec3 uClickPos; uniform float uClickTime;
        varying vec3 vNormal;
        void main() {
          vNormal = normal; vec3 pos = position;
          float dist = distance(pos, uClickPos);
          float timeSinceClick = uTime - uClickTime;
          if (timeSinceClick > 0.0 && timeSinceClick < 2.5) {
             float waveDist = timeSinceClick * 15.0;
             float diff = dist - waveDist;
             if (abs(diff) < 5.0) {
                float wave = sin(diff * 1.0) * exp(-abs(diff) * 0.5);
                pos += normal * wave * 0.8;
             }
          }
          gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
        }
      `,fragmentShader:"uniform vec3 uColor; void main() { gl_FragColor = vec4(uColor, 0.25); }"}),n=new g(e,i);n.name="PLANET_SURFACE",this.mainGroup.add(n);let s=new N(10+.5,2),a=new T({color:65535,transparent:!0,opacity:.05,side:lt});this.mainGroup.add(new g(s,a))}loadProjectMarkers(){let t=this.dataService.projects,e=[{lat:20,lon:0},{lat:-20,lon:60},{lat:40,lon:-60}];t.forEach((i,n)=>{let s=e[n%e.length],a=i.type.includes("GAME")?this.COLOR_GAME:this.COLOR_WEB;this.createBeacon(10,s.lat,s.lon,i,a)})}createBeacon(t,e,i,n,s){let a=new I,h=(90-e)*(Math.PI/180),E=(i+180)*(Math.PI/180),y=-(t*Math.sin(h)*Math.cos(E)),jt=t*Math.sin(h)*Math.sin(E),Ht=t*Math.cos(h),Z=new p(y,Ht,jt);a.position.copy(Z),a.quaternion.setFromUnitVectors(new p(0,1,0),Z.clone().normalize());let At=new z(.5,0),Lt=new T({color:s,wireframe:!0}),v=new g(At,Lt);v.position.y=2.5,v.name="BEACON_DIAMOND",a.add(v);let It=new T({color:16777215});v.add(new g(new z(.2,0),It));let Nt=new T({color:s,transparent:!0,opacity:.5}),K=new g(new wt(.02,.02,2.5,4),Nt);K.position.y=1.25,a.add(K);let zt=new T({color:s,side:ct}),j=new g(new Mt(.3,.5,6),zt);j.rotation.x=Math.PI/2,j.position.y=.1,a.add(j),a.userData={isMarker:!0,project:n,baseColor:s},this.mainGroup.add(a),this.markers.push(a)}onMouseMove(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-(t.clientY/window.innerHeight)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);let e=this.raycaster.intersectObjects(this.mainGroup.children,!0),i=null;if(e.length>0){let n=e[0].object;for(;n.parent&&n.parent!==this.mainGroup;){if(n.userData&&n.userData.isMarker){i=n;break}if(n.parent.userData&&n.parent.userData.isMarker){i=n.parent;break}n=n.parent}}i!==this.hoveredMarker&&(this.hoveredMarker&&(this.setMarkerColor(this.hoveredMarker,this.hoveredMarker.userData.baseColor),document.body.classList.remove("hover-active")),i&&(this.setMarkerColor(i,this.COLOR_HOVER),document.body.classList.add("hover-active")),this.hoveredMarker=i)}setMarkerColor(t,e){t.traverse(i=>{i instanceof g&&(i.name==="BEACON_DIAMOND"||i.geometry.type==="CylinderGeometry")&&i.material.color.setHex(e)})}onMouseDown(t){if(this.hoveredMarker){this.controls.autoRotate=!1,this.openProject(this.hoveredMarker.userData.project);return}let e=this.raycaster.intersectObjects(this.mainGroup.children,!0).find(i=>i.object.name==="PLANET_SURFACE");if(e){let i=e.point.clone().applyMatrix4(e.object.matrixWorld.clone().invert());this.planetUniforms&&(this.planetUniforms.uClickPos.value.copy(i),this.planetUniforms.uClickTime.value=this.clock.getElapsedTime())}}openProject(t){this.activeProject.set(t)}closeProject(){this.activeProject.set(null),this.controls.autoRotate=!0}animate(){this.animationId=requestAnimationFrame(()=>this.animate());let t=this.clock.getElapsedTime();this.planetUniforms&&(this.planetUniforms.uTime.value=t),this.markers.forEach((e,i)=>{let n=e.children[0];n&&(n.rotation.y+=.02,n.position.y=2.5+Math.sin(t*3+i)*.2)}),this.controls.update(),this.renderer.render(this.scene,this.camera)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}ngOnDestroy(){cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onWindowResize),this.renderer&&this.renderer.dispose()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=F({type:o,selectors:[["app-holo-rebirth"]],viewQuery:function(e,i){if(e&1&&et($t,5),e&2){let n;it(n=ot())&&(i.rendererContainer=n.first)}},decls:43,vars:7,consts:[["rendererContainer",""],[1,"holo-container",3,"mousedown","mousemove"],[1,"hud-overlay"],[1,"scan-line"],[1,"hud-top-left"],[1,"sub-text"],[1,"legend-box"],[1,"legend-item"],[1,"dot","web"],[1,"dot","game"],[1,"hud-bottom-center"],[1,"nav-hint"],[1,"project-card"],[1,"card-media"],[1,"card-content"],[1,"card-header"],[1,"card-id"],[1,"close-btn",3,"click"],[1,"card-title"],[1,"card-divider"],[1,"card-desc"],[1,"tech-stack"],[1,"tech-badge"],[1,"card-actions"],["target","_blank",1,"action-btn",3,"href"],[1,"arrow"],["autoplay","","loop","","muted","","playsinline","","class","media-content",3,"src",4,"ngIf"],["class","media-content",3,"src",4,"ngIf"],[1,"media-overlay"],["autoplay","","loop","","muted","","playsinline","",1,"media-content",3,"src"],[1,"media-content",3,"src"]],template:function(e,i){if(e&1){let n=tt();l(0,"div",1,0),H("mousedown",function(a){return C(n),R(i.onMouseDown(a))})("mousemove",function(a){return C(n),R(i.onMouseMove(a))}),d(),l(2,"div",2),b(3,"div",3),l(4,"div",4)(5,"h1"),m(6,"// ORBIT_VIEW"),d(),l(7,"div",5),m(8,"SYSTEM: ONLINE"),d(),l(9,"div",6)(10,"div",7),b(11,"span",8),m(12," WEB / APP"),d(),l(13,"div",7),b(14,"span",9),m(15," GAME DEV"),d()()(),l(16,"div",10)(17,"div",11),m(18,"[ HOVER NODES TO SCAN ]"),d(),l(19,"div",11),m(20,"[ CLICK TO ACCESS DATA ]"),d()()(),l(21,"div",12),X(22,ie,4,2,"div",13),l(23,"div",14)(24,"div",15)(25,"span",16),m(26),d(),l(27,"button",17),H("click",function(){return C(n),R(i.closeProject())}),m(28,"[X]"),d()(),l(29,"h2",18),m(30),d(),b(31,"div",19),l(32,"p",20),m(33),d(),l(34,"div",21),J(35,oe,2,1,"span",22,Q),d(),l(37,"div",23)(38,"a",24)(39,"span"),m(40,"GITHUB REPO"),d(),l(41,"span",25),m(42,"\u2192"),d()()()()()}if(e&2){let n,s,a,h,E,y;f(21),nt("visible",i.activeProject()),f(),q((n=i.activeProject())!=null&&n.videoUrl||(n=i.activeProject())!=null&&n.heroImage?22:-1),f(4),st("ID: ",(s=i.activeProject())==null?null:s.id),f(4),O((a=i.activeProject())==null?null:a.name),f(3),O((h=i.activeProject())==null?null:h.description),f(2),$((E=i.activeProject())==null?null:E.techStack),f(3),M("href",(y=i.activeProject())==null?null:y.githubUrl,x)}},dependencies:[rt,at],styles:[".holo-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#050505;z-index:1}.hud-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;pointer-events:none;z-index:10;background:radial-gradient(circle,transparent 50%,black 140%)}.legend-box[_ngcontent-%COMP%]{margin-top:15px;border-left:2px solid rgba(255,255,255,.2);padding-left:10px}.legend-item[_ngcontent-%COMP%]{font-family:Courier New;font-size:10px;color:#ccc;margin-bottom:5px;display:flex;align-items:center;gap:8px}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block;box-shadow:0 0 5px currentColor}.dot.web[_ngcontent-%COMP%]{background-color:#0ff;color:#0ff}.dot.game[_ngcontent-%COMP%]{background-color:#f0f;color:#f0f}.hud-top-left[_ngcontent-%COMP%]{position:absolute;top:40px;left:40px;color:#0ff;font-family:Courier New}.hud-bottom-center[_ngcontent-%COMP%]{position:absolute;bottom:40px;width:100%;text-align:center}.nav-hint[_ngcontent-%COMP%]{font-size:10px;color:#00ffff80;font-family:Courier New;letter-spacing:2px}.scan-line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,transparent,rgba(0,255,255,.5),transparent);animation:_ngcontent-%COMP%_scan 8s linear infinite;opacity:.2}.project-card[_ngcontent-%COMP%]{position:absolute;top:50%;right:10%;width:350px;background:#050a0ff2;border:1px solid #00ffff;padding:2px;transform:translateY(-50%) translate(50px);opacity:0;transition:.4s;pointer-events:none;z-index:20;display:flex;flex-direction:column}.project-card.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(-50%) translate(0);pointer-events:auto}.card-media[_ngcontent-%COMP%]{width:100%;height:180px;position:relative;background:#000;border-bottom:1px solid #00ffff;overflow:hidden;display:flex;justify-content:center;align-items:center}.media-content[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.media-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(0,255,255,.1) 1px,transparent 1px);background-size:100% 4px;pointer-events:none}.card-content[_ngcontent-%COMP%]{padding:20px;font-family:Courier New;color:#fff}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#0ff;cursor:pointer;font-size:14px;transition:color .2s}.close-btn[_ngcontent-%COMP%]:hover{color:#f33}.card-title[_ngcontent-%COMP%]{font-size:18px;margin:0;text-transform:uppercase;letter-spacing:1px}.card-divider[_ngcontent-%COMP%]{height:1px;background:#0ff;margin:10px 0;opacity:.3}.card-desc[_ngcontent-%COMP%]{font-size:11px;color:#ccc;margin-bottom:10px;border-left:2px solid #00aaaa;padding-left:10px}.tech-stack[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px}.tech-badge[_ngcontent-%COMP%]{font-size:9px;padding:2px 5px;border:1px solid #00ffaa;color:#0fa;border-radius:2px}.action-btn[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px;padding:10px;border:1px solid #00ffff;color:#0ff;text-decoration:none;font-weight:700;font-size:11px;transition:.2s}.action-btn[_ngcontent-%COMP%]:hover{background:#0ff;color:#000}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.2}}@keyframes _ngcontent-%COMP%_scan{0%{top:-10%}to{top:110%}}"]})};export{kt as HoloRebirthComponent};
